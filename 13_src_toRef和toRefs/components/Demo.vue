<template>
  <h4>{{ person }}</h4>
  <h2>å§“åï¼š{{ name }}</h2>
  <h2>å¹´é¾„ï¼š{{ age }}</h2>
  <h2>è–ªèµ„ï¼š{{ job.j1.salary }}</h2>
  <button @click="name = 'æå››'">ä¿®æ”¹å§“å</button>
  <button @click="age = 24">ä¿®æ”¹å¹´é¾„</button>
  <button @click="job.j1.salary++">ä¿®æ”¹è–ªèµ„</button>
</template>

<script>
// å¼•å…¥æ¸²æŸ“å‡½æ•°
// import { h } from "vue";
import { ref, reactive, toRef,toRefs } from "vue";
export default {
  name: "demo",
  props: ["msg", "school"],
  // vue3ä¼ è‡ªå®šä¹‰äº‹ä»¶å¾—åœ¨è¿™é‡Œä½¿ç”¨emitsé‡Œæ¥æ”¶
  emits: ["hello"],

  /**
   * ä¸”setupä¼šåœ¨beforeCreateä¹‹å‰å…ˆæ‰§è¡Œä¸€æ¬¡
   * @param {*} props ç»„ä»¶å¤–ä¼ è¾“è¿›æ¥çš„å€¼
   * @param {*} context é‡Œé¢åŒ…å«emit attrs slots
   */
  setup() {
    let person = reactive({
      name: "å¼ ä¸‰",
      age: 18,
      job: {
        j1: {
          salary: 21,
        },
      },
    });

    // è¿™é‡Œç›¸å½“äºæ˜¯name1 = å¼ ä¸‰
    // const name1 = person.name;
    // console.log("ğŸš€ ~ file: Demo.vue ~ line 37 ~ setup ~ name1", name1);

    // // ä½¿ç”¨toRefåï¼Œæ˜¯å­˜åœ¨ä¸€ä¸ªå¼•ç”¨å…³ç³»ï¼Œä¼šå¼•ç”¨ä¼ å…¥çš„å¯¹è±¡æŒ‡çš„å±æ€§ï¼Œæ”¹name2æºæ•°æ®ä¹Ÿä¼šåŒæ­¥æ›´æ”¹
    const name2 = toRef(person, "name");
    console.log("ğŸš€ ~ file: Demo.vue ~ line 40 ~ setup ~ name2", name2);

    // toRefså¯ä»¥æŠŠå¯¹è±¡é‡Œçš„å…¨éƒ¨å±æ€§å˜ä¸ºrefï¼Œæ‰€ä»¥ä¸éœ€è¦ä¼ ç¬¬äºŒä¸ªå‚æ•° ï¼ˆä¸è¿‡åªèƒ½å±•å¼€ç¬¬ä¸€å±‚ï¼Œè¦æ˜¯æœ‰åƒjobè¿™æ ·çš„æ·±å±‚ç»“æ„ï¼Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ—¶è¿˜æ˜¯å¾—job.j1.salary,ä¸è¿‡ä¸ç”¨person.xxxï¼‰
    const x = toRefs(person)
    console.log("ğŸš€ ~ file: Demo.vue ~ line 46 ~ setup ~ x", x)
    

    // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¸¸ç”¨ï¼‰
    return {
      person,
      // name: toRef(person, "name"),
      // age: toRef(person, "age"),
      // salary: toRef(person.job.j1, "salary"),
      ...toRefs(person)
    };
  },
};
</script>

<style></style>
